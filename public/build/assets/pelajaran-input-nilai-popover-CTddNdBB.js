import{r as c,j as r,S as g}from"./app-DpfdW_r7.js";import{B as d}from"./button-DTT2fkdQ.js";import{I as v}from"./input-BS3ehIaV.js";import{P as h,a as x,b}from"./popover-C2UhExVz.js";import{e as _}from"./utils-CuXvM_eT.js";import{t as o}from"./index-B-v_Mcin.js";/* empty css            */import"./index-Bn78W0G-.js";import"./index-mHq7RGbL.js";import"./index-D9IwJIAp.js";import"./index-Brdl_M0l.js";import"./index-C7d_I9YW.js";import"./index-BUbDSQ73.js";import"./index-NApHEZtM.js";import"./index-Cs2VM941.js";import"./index-IJoEPwWj.js";import"./index-CAPfhsIC.js";const T=({nilai:t,jenis:a,siswa_id:u,pelajaran_id:p})=>{const[s,m]=c.useState({pelajaran_id:(t==null?void 0:t.pelajaran_id)??p,siswa_id:(t==null?void 0:t.siswa_id)??u,nilai_tugas:(t==null?void 0:t.nilai_tugas)??0,nilai_evaluasi:(t==null?void 0:t.nilai_evaluasi)??0});c.useEffect(()=>{m({pelajaran_id:(t==null?void 0:t.pelajaran_id)??p,siswa_id:(t==null?void 0:t.siswa_id)??u,nilai_tugas:(t==null?void 0:t.nilai_tugas)??0,nilai_evaluasi:(t==null?void 0:t.nilai_evaluasi)??0})},[t,p,u]);const l=()=>{t?g.put(route("nilai.update",t.id),{...s,...a==="tugas"?{nilai_tugas:s.nilai_tugas}:{nilai_evaluasi:s.nilai_evaluasi}},{preserveScroll:!0,onSuccess:()=>{o.success("Nilai berhasil diubah")},onError:e=>{o.error(_(e))}}):g.post(route("nilai.store"),{...s,...a==="tugas"?{nilai_tugas:s.nilai_tugas}:{nilai_evaluasi:s.nilai_evaluasi}},{preserveScroll:!0,onSuccess:()=>{o.success("Nilai berhasil diubah")},onError:e=>{o.error(_(e))}})};return r.jsxs(h,{children:[r.jsx(x,{asChild:!0,children:r.jsx(d,{variant:"ghost",size:"icon",children:a==="tugas"?(t==null?void 0:t.nilai_tugas)??0:(t==null?void 0:t.nilai_evaluasi)??"0"})}),r.jsx(b,{side:"bottom",align:"start",className:"w-32",children:r.jsxs("form",{onSubmit:e=>{e.preventDefault(),l()},children:[a==="tugas"?r.jsx(v,{className:"text-center",type:"number",step:.01,value:s.nilai_tugas,onChange:e=>m({...s,nilai_tugas:e.target.value==""?0:Number(e.target.value)})}):null,a==="evaluasi"?r.jsx(v,{className:"text-center",type:"number",step:.01,value:s.nilai_evaluasi,onChange:e=>m({...s,nilai_evaluasi:e.target.value==""?0:Number(e.target.value)})}):null]})})]})};export{T as default};
