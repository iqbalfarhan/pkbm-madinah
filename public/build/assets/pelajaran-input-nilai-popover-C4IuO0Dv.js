import{r as c,j as r,S as g}from"./app-gjtAn5El.js";import{B as d}from"./button-By04tjtr.js";import{I as v}from"./input-E0N1tJe0.js";import{P as h,a as x,b}from"./popover-CjkxC4vb.js";import{e as _}from"./utils-DMfQtvov.js";import{t as o}from"./index-dz1GIDOc.js";/* empty css            */import"./index-DvkuFPqW.js";import"./index-B26Os_Ix.js";import"./index-DJU7MOx1.js";import"./index-C5BeI9rp.js";import"./index-Ds6vXjzw.js";import"./index-BGrkkWQn.js";import"./index-D2y8B7B1.js";import"./index-BCWsKhRR.js";import"./index-DB7pJufW.js";import"./index-C8i6XsBO.js";const T=({nilai:t,jenis:a,siswa_id:u,pelajaran_id:p})=>{const[s,m]=c.useState({pelajaran_id:(t==null?void 0:t.pelajaran_id)??p,siswa_id:(t==null?void 0:t.siswa_id)??u,nilai_tugas:(t==null?void 0:t.nilai_tugas)??0,nilai_evaluasi:(t==null?void 0:t.nilai_evaluasi)??0});c.useEffect(()=>{m({pelajaran_id:(t==null?void 0:t.pelajaran_id)??p,siswa_id:(t==null?void 0:t.siswa_id)??u,nilai_tugas:(t==null?void 0:t.nilai_tugas)??0,nilai_evaluasi:(t==null?void 0:t.nilai_evaluasi)??0})},[t,p,u]);const l=()=>{t?g.put(route("nilai.update",t.id),{...s,...a==="tugas"?{nilai_tugas:s.nilai_tugas}:{nilai_evaluasi:s.nilai_evaluasi}},{preserveScroll:!0,onSuccess:()=>{o.success("Nilai berhasil diubah")},onError:e=>{o.error(_(e))}}):g.post(route("nilai.store"),{...s,...a==="tugas"?{nilai_tugas:s.nilai_tugas}:{nilai_evaluasi:s.nilai_evaluasi}},{preserveScroll:!0,onSuccess:()=>{o.success("Nilai berhasil diubah")},onError:e=>{o.error(_(e))}})};return r.jsxs(h,{children:[r.jsx(x,{asChild:!0,children:r.jsx(d,{variant:"ghost",size:"icon",children:a==="tugas"?(t==null?void 0:t.nilai_tugas)??0:(t==null?void 0:t.nilai_evaluasi)??"0"})}),r.jsx(b,{side:"bottom",align:"start",className:"w-32",children:r.jsxs("form",{onSubmit:e=>{e.preventDefault(),l()},children:[a==="tugas"?r.jsx(v,{className:"text-center",type:"number",step:.01,value:s.nilai_tugas,onChange:e=>m({...s,nilai_tugas:e.target.value==""?0:Number(e.target.value)})}):null,a==="evaluasi"?r.jsx(v,{className:"text-center",type:"number",step:.01,value:s.nilai_evaluasi,onChange:e=>m({...s,nilai_evaluasi:e.target.value==""?0:Number(e.target.value)})}):null]})})]})};export{T as default};
